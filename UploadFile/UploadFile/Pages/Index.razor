@page "/"
@inject HttpContext httpContext
<PageTitle>UploadFile</PageTitle>

<InputFile OnChange="@LoadFiles" multiple />
<img src="@imageUrl" width="700px" height="500px" />

@code{
    private string imageUrl { get; set; }

    

    private async void LoadFiles(InputFileChangeEventArgs e)
    {
        httpContext.Session.SetString("Mykey","Mystring");

        var imageFile = await e.File.RequestImageFileAsync("image/png", maxWidth: 1024, maxHeight: 1024);
        using (FileStream fileStream = new($"c:\\MyImages\\{e.File.Name}", FileMode.Create))
        {
            await imageFile.OpenReadStream().CopyToAsync(fileStream);
            
            imageUrl = $"http://localimages.net/{e.File.Name}";
            this.StateHasChanged();
        }
    }

}